-- LocalScript (çalıştırmak için bir executer kullan)

local player = game.Players.LocalPlayer
local coreGui = game:GetService("CoreGui") -- CoreGui'ye koyarsak resetlemez

-- Eğer zaten varsa eskiyi kaldır (çift GUI önle)
local existing = coreGui:FindFirstChild("SpeedGUI")
if existing then existing:Destroy() end

-- Ana GUI
local SpeedGUI = Instance.new("ScreenGui")
SpeedGUI.Name = "SpeedGUI"
SpeedGUI.DisplayOrder = 1000
SpeedGUI.IgnoreGuiInset = true
SpeedGUI.ResetOnSpawn = false  -- Respawn'da silinmesin
SpeedGUI.Parent = coreGui

-- Küçük frame (artı butonu)
local SmallerFrame = Instance.new("Frame")
SmallerFrame.Name = "SmallerSpeedFrame"
SmallerFrame.Size = UDim2.new(0, 60, 0, 60)  -- biraz büyüttüm
SmallerFrame.Position = UDim2.new(0.05, 0, 0.85, 0)  -- biraz yukarı
SmallerFrame.BackgroundColor3 = Color3.fromRGB(80, 80, 255)  -- mavi
SmallerFrame.BackgroundTransparency = 0.2
SmallerFrame.Parent = SpeedGUI

-- Köşeleri yuvarlat
local cornerSmall = Instance.new("UICorner")
cornerSmall.CornerRadius = UDim.new(0, 15)
cornerSmall.Parent = SmallerFrame

-- Artı butonu
local PlusButton = Instance.new("TextButton")
PlusButton.Name = "PlusButton"
PlusButton.Size = UDim2.new(1, 0, 1, 0)
PlusButton.BackgroundColor3 = Color3.fromRGB(80, 80, 255)
PlusButton.BackgroundTransparency = 0.2
PlusButton.Text = "+"
PlusButton.TextColor3 = Color3.new(1, 1, 1)
PlusButton.Font = Enum.Font.GothamBold
PlusButton.TextSize = 30
PlusButton.Parent = SmallerFrame

-- Artı butonun köşeleri
local cornerPlus = Instance.new("UICorner")
cornerPlus.CornerRadius = UDim.new(0, 15)
cornerPlus.Parent = PlusButton

-- Hız göstergesi (küçük frame'in yanında)
local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Name = "SpeedLabel"
SpeedLabel.Size = UDim2.new(0, 120, 0, 40)
SpeedLabel.Position = UDim2.new(1, 10, 0, 10)
SpeedLabel.BackgroundColor3 = Color3.fromRGB(80, 80, 255)
SpeedLabel.BackgroundTransparency = 0.2
SpeedLabel.Text = "Hız: 16"  -- varsayılan walkspeed
SpeedLabel.TextColor3 = Color3.new(1, 1, 1)
SpeedLabel.Font = Enum.Font.GothamBold
SpeedLabel.TextSize = 18
SpeedLabel.Parent = SmallerFrame

local cornerSpeed = Instance.new("UICorner")
cornerSpeed.CornerRadius = UDim.new(0, 10)
cornerSpeed.Parent = SpeedLabel

-- Geniş frame (ayar paneli)
local FullFrame = Instance.new("Frame")
FullFrame.Name = "FullSpeedFrame"
FullFrame.Size = UDim2.new(0, 300, 0, 200)
FullFrame.Position = UDim2.new(0.05, 0, 0.4, 0)
FullFrame.BackgroundColor3 = Color3.fromRGB(80, 80, 255)
FullFrame.BackgroundTransparency = 0.1
FullFrame.Visible = false
FullFrame.Parent = SpeedGUI

local cornerFull = Instance.new("UICorner")
cornerFull.CornerRadius = UDim.new(0, 20)
cornerFull.Parent = FullFrame

-- Başlık
local SetSpeedLabel = Instance.new("TextLabel")
SetSpeedLabel.Name = "SetSpeedLabel"
SetSpeedLabel.Size = UDim2.new(1, 0, 0.25, 0)
SetSpeedLabel.BackgroundTransparency = 1
SetSpeedLabel.Text = "Hız Ayarı"
SetSpeedLabel.TextColor3 = Color3.new(1, 1, 1)
SetSpeedLabel.Font = Enum.Font.GothamBold
SetSpeedLabel.TextSize = 22
SetSpeedLabel.Parent = FullFrame

-- Giriş kutusu
local SpeedInput = Instance.new("TextBox")
SpeedInput.Name = "SpeedInput"
SpeedInput.Size = UDim2.new(0.7, 0, 0.25, 0)
SpeedInput.Position = UDim2.new(0.15, 0, 0.3, 0)
SpeedInput.BackgroundColor3 = Color3.new(1, 1, 1)
SpeedInput.TextColor3 = Color3.new(0, 0, 0)
SpeedInput.PlaceholderText = "Hız (örn: 50)"
SpeedInput.PlaceholderColor3 = Color3.fromRGB(150,150,150)
SpeedInput.Font = Enum.Font.Gotham
SpeedInput.TextSize = 16
SpeedInput.Parent = FullFrame

local cornerInput = Instance.new("UICorner")
cornerInput.CornerRadius = UDim.new(0, 8)
cornerInput.Parent = SpeedInput

-- Ayarla butonu
local SetSpeedButton = Instance.new("TextButton")
SetSpeedButton.Name = "SetSpeedButton"
SetSpeedButton.Size = UDim2.new(0.7, 0, 0.25, 0)
SetSpeedButton.Position = UDim2.new(0.15, 0, 0.6, 0)
SetSpeedButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SetSpeedButton.Text = "AYARLA"
SetSpeedButton.TextColor3 = Color3.new(1, 1, 1)
SetSpeedButton.Font = Enum.Font.GothamBold
SetSpeedButton.TextSize = 18
SetSpeedButton.Parent = FullFrame

local cornerSet = Instance.new("UICorner")
cornerSet.CornerRadius = UDim.new(0, 10)
cornerSet.Parent = SetSpeedButton

-- Küçült butonu (eksi)
local MinusButton = Instance.new("TextButton")
MinusButton.Name = "MinusButton"
MinusButton.Size = UDim2.new(0, 30, 0, 30)
MinusButton.Position = UDim2.new(1, -40, 0, 10)
MinusButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
MinusButton.Text = "-"
MinusButton.TextColor3 = Color3.new(1, 1, 1)
MinusButton.Font = Enum.Font.GothamBold
MinusButton.TextSize = 24
MinusButton.Parent = FullFrame

local cornerMinus = Instance.new("UICorner")
cornerMinus.CornerRadius = UDim.new(0, 8)
cornerMinus.Parent = MinusButton

-- Kredi yazısı (alt köşede)
local CreditLabel = Instance.new("TextLabel")
CreditLabel.Name = "CreditLabel"
CreditLabel.Size = UDim2.new(1, -10, 0, 25)
CreditLabel.Position = UDim2.new(0, 5, 1, -30)
CreditLabel.BackgroundTransparency = 1
CreditLabel.Text = "Made by Valfelx | 31 AKTİF"
CreditLabel.TextColor3 = Color3.fromRGB(200,200,200)
CreditLabel.Font = Enum.Font.Gotham
CreditLabel.TextSize = 14
CreditLabel.TextXAlignment = Enum.TextXAlignment.Right
CreditLabel.Parent = FullFrame

-- Fonksiyon: geniş paneli aç, küçük frame'i gizle
local function expandFullGUI()
    SmallerFrame.Visible = false
    FullFrame.Visible = true
end

-- Eksi butonuna basınca küçült
MinusButton.MouseButton1Click:Connect(function()
    SmallerFrame.Visible = true
    FullFrame.Visible = false
end)

-- Hız ayarlama butonu
SetSpeedButton.MouseButton1Click:Connect(function()
    local newSpeed = tonumber(SpeedInput.Text)
    if newSpeed and newSpeed > 0 then
        local char = player.Character
        if char and char:FindFirstChildWhichIsA("Humanoid") then
            char.Humanoid.WalkSpeed = newSpeed
            SpeedLabel.Text = "Hız: " .. newSpeed
        else
            -- Karakter yoksa bekle
            player.CharacterAdded:Connect(function(c)
                task.wait(0.5)
                if c and c:FindFirstChildWhichIsA("Humanoid") then
                    c.Humanoid.WalkSpeed = newSpeed
                    SpeedLabel.Text = "Hız: " .. newSpeed
                end
            end)
        end
    else
        SpeedInput.Text = ""
        SpeedInput.PlaceholderText = "Geçersiz sayı!"
    end
end)

-- Artı butonu aç/kapat
PlusButton.MouseButton1Click:Connect(function()
    if FullFrame.Visible then
        SmallerFrame.Visible = true
        FullFrame.Visible = false
    else
        expandFullGUI()
    end
end)

-- Karakter değişince hızı koru (ayarlanan son hızı hatırla)
local lastSpeed = 16  -- varsayılan
SetSpeedButton.MouseButton1Click:Connect(function()
    local s = tonumber(SpeedInput.Text)
    if s then lastSpeed = s end
end)

player.CharacterAdded:Connect(function(char)
    task.wait(0.5)
    local hum = char:FindFirstChildWhichIsA("Humanoid")
    if hum and lastSpeed then
        hum.WalkSpeed = lastSpeed
    end
end)

-- Başlangıçta karakter varsa hızı oku
task.wait(0.5)
local char = player.Character
if char and char:FindFirstChildWhichIsA("Humanoid") then
    lastSpeed = char.Humanoid.WalkSpeed
    SpeedLabel.Text = "Hız: " .. lastSpeed
end

-- Küçük bir "31 AKTİF" bildirimi (isteğe bağlı)
local idLabel = Instance.new("TextLabel")
idLabel.Size = UDim2.new(0, 150, 0, 50)
idLabel.Position = UDim2.new(0.5, -75, 1, -60)
idLabel.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
idLabel.BackgroundTransparency = 0.2
idLabel.Text = "31 AKTİF"
idLabel.TextColor3 = Color3.new(1, 1, 1)
idLabel.Font = Enum.Font.GothamBold
idLabel.TextSize = 28
idLabel.TextStrokeTransparency = 0.3
idLabel.Parent = coreGui

local idCorner = Instance.new("UICorner")
idCorner.CornerRadius = UDim.new(0, 15)
idCorner.Parent = idLabel

task.delay(5, function()
    idLabel:Destroy()
end)
